{
  "definitions": {},
  "$schema": "http://json-schema.org/draft-07/schema#",

  "$id": "#terminals_list",
  "type": "array",
  "description": "List of considered terminals and subsequent data.",
  "items":{
    "$id": "#terminal_item",
    "type":"object",
    "description": "A terminal description.",
    "required": [
      "ships_list"
    ],
    "properties": {
      "terminal":{
        "type": "string",
        "description": "The terminal identifier (for grouping in data analysis context).",
        "examples": [
                "Bassens"
        ]
      },
      "ships_list": {
        "$id": "#ships_list",
        "type": "array",
        "description": "List of considered ships and subsequent data.",
        "items": {
          "$id": "#ship_item",
          "type": "object",
          "description": "A ship description.",
          "required": [
            "stopovers_list"
          ],
          "properties": {
            "ID": {
              "type": "string",
              "description": "The ship's unique identifier, can be IMO or other.",
              "$comment": "If we choose to impose IMO, we can adapt the pattern.",
              "examples": [
                "IMO1234567"
              ]
            },
            "category": {
              "type": "string",
              "description": "The ship's Category (for grouping in data analysis context).",
              "examples": [
                "cargo >500 tjb"
              ]
            },
            "capacity": {
              "type": "integer",
              "description": "The ship's maximal load value.",
              "examples": [
                15000
              ]
            },
            "label": {
              "type": "string",
              "description": "Free labelling, can be use for boat's name or comments.",
              "examples": [
                "Ship's labelling (eg. name)"
              ]
            },
            "stopovers_list": {
              "$id": "stopovers_array",
              "type": "array",
              "description": "List of considered stopovers and subsequent data.",
              "items": {
                "$id": "#stopover_item",
                "type": "object",
                "description": "A Stopover description.",
                "required": [
                  "handlings_list"
                ],
                "properties": {
                  "ID": {
                    "type": "string",
                    "description": "The Stopover's unique identifier (sometime called journey's id).",
                    "default": "",
                    "examples": [
                      "20190465"
                    ],
                    "pattern": "^(.*)$"
                  },
                  "status": {
                    "type": "string",
                    "description": "The Stopover status (categorial), among : expected, ongoing, achieved, canceled, other.",
                    "enum": [
                      "expected",
                      "ongoing",
                      "achieved",
                      "canceled",
                      "other"
                    ],
                    "examples": [
                      "achieved"
                    ]
                  },
                  "port_gate": {
                    "type": "object",
                    "description": "Ship's timespan inside port's jurisdiction.",
                    "required": [],
                    "properties": {
                      "ETA": {
                        "type": "string",
                        "description": "Estimated time of arrival into port jurisdiction.",
                        "examples": [
                          "2018-11-13T20:00:00+00:00"
                        ]
                      },
                      "ETD": {
                        "type": "string",
                        "description": "Estimated time of departure from port jurisdiction.",
                        "examples": [
                          "2018-11-14T14:00:00+00:00"
                        ]
                      }
                    }
                  },
                  "handlings_list": {
                    "$id": "#handlings_array",
                    "type": "array",
                    "description": "List of considered handlings and subsequent data.",
                    "items": {
                      "$id": "#handling_item",
                      "type": "object",
                      "description": "An handling description",
                      "required": [
                        "nature",
                        "dock",
                        "contents"
                      ],
                      "properties": {
                        "ID":{
                          "type": "string",
                          "description": "The handling's unique identifier."
                        },
                        "nature": {
                          "type": "string",
                          "description": "The handling's nature (categorial), among: cargo, passenger, container.",
                          "$comment": "This is a key parameter that drive the required properties of Content. Curently, PAS modelling only supports 'Cargo'.",
                          "enum": [
                            "cargo",
                            "passenger",
                            "container"
                          ],
                          "examples": [
                            "cargo"
                          ]
                        },
                        "dangerous": {
                          "type": "boolean",
                          "description": "Element considered as dangerous are onboard.",
                          "examples": [
                            false
                          ]
                        },
                        "agent": {
                          "type": "string",
                          "description": "The Agent requesting the handling (for grouping in data analysis context).",
                          "examples": [
                            "Cargo's agent's name"
                          ]
                        },
                        "operator": {
                          "type": "string",
                          "description": "The Operator doing the handling (for grouping in data analysis context).",
                          "examples": [
                            "Cargo's operator's name"
                          ]
                        },
                        "dock": {
                          "type": "object",
                          "description": "Information about the concerned docking.",
                          "required": [
                            "ID",
                            "ETA"
                          ],
                          "properties": {
                            "ID": {
                              "type": "string",
                              "description": "The dock's unique identifier, among : listed in port's parameters file.",
                              "examples": [
                                "dock_432"
                              ]
                            },
                            "ETA": {
                              "type": "string",
                              "format": "date-time",
                              "description": "Estimated time of arrival at dock.",
                              "examples": [
                                "2018-11-16T07::00:00+00:00"
                              ]
                            },
                            "ETD": {
                              "type": "string",
                              "format": "date-time",
                              "description": "Estimated time of departure from dock.",
                              "examples": [
                                "2018-11-16T07::00:00+00:00"
                              ]
                            }
                          }
                        },
                        "contents": {
                          "$id": "#contents=cargo",
                          "type": "object",
                          "description": "Required properties differt according to the handling's type, here for 'cargo'.",
                          "$comment": "This current version only support an handling's type of Cargo.",
                          "required": [
                            "direction",
                            "category",
                            "amount"
                          ],
                          "properties": {
                            "direction": {
                              "type": "string",
                              "description": "Handling's direction (categorial), among : loading, unloading, other.",
                              "enum": [
                                "loading",
                                "unloading",
                                "other"
                              ],
                              "default": "other",
                              "examples": [
                                "unloading"
                              ]
                            },
                            "category": {
                              "type": "string",
                              "description": "Cargo's type (categorial), among : listed in port's parameters file.",
                              "default": "unknown",
                              "examples": [
                                "corn"
                              ]
                            },
                            "amount": {
                              "type": "integer",
                              "description": "The quantity of cargo to load or unload. Unit is inferred from cargo's category (through port's parameters file).",
                              "default": 0,
                              "examples": [
                                4560
                              ]
                            },
                            "label": {
                              "type": "string",
                              "description": "Open text field for cargo's labelling as a short description.",
                              "examples": [
                                "Cargo's labelling (eg. short description)"
                              ]
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}